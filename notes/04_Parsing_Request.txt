Parsing Request

1.streams 
2.chunks
3.Buffers
4.reading Chunk
4.Buffering Chunks
6.Parsing Request
7.Using Modules

5.1 Stream : browser - Node.js -
	Data pass stream bits data
	Data :pices bits data pass 
	
	ex : (Ek bar me aaye All data) Bharuch -> ahemdabad

	--> Duplex Stream
	Application - Write -write buffer - socket 
	socket -> read buffer - read - Application

5.2 chunks

	input : chunk(1bitsdata)- chunk(1bits-data) - node.js - chunk(1bits)-chunks(1-bits)-output
	Chunks : reading  and processing
		1 chunk Reading to 1 chunk processing -> push
		1 chunk Reading to 1 chunk processing -> push

5.3 Buffers 
	: multiple Chunks Aaave to buffers data 
	: order data pass kariye to aej order ma ae na hoy aene buffer

	: Buffers : stops data number data store
		  : Buffer output number line by data pass kare ga


5.4 Reading Chunk

	code : 
	 else if (req.url.toLowerCase() === "/submit-details" && req.method == "POST"){

        // chunk created single chunk use
        req.on('data',(chunk)=>{
            console.log(chunk);
        });

        fs.writeFileSync('user.txt','shubham jadav');
        res.statusCode = 302;
        res.setHeader('Location','/');
        return res.end();
    	}
	: chunk reading line nathi aavato code buffer lagavishu
	output: 
	Server starting..
		/submit-details POST
	Server starting..
	<Buffer 75 73 65 72 6e 61 6d 65 3d 73 68 75 62 68 61 6d 2b 6a 61 64 61 76 26 67 65 6e 64 65 72 	3d 6d 61 6c 65>

5.5 Buffering Chunks
	
	code :
	 // created buffer data store
        const body = [];
        // chunk created single chunk use

        req.on('data',(chunk)=>{
            console.log(chunk);
            body.push(chunk);
        });

        // buffer to end data that will show
        req.on("end",()=>{
            const parsedBody = Buffer.concat(body).toString();
            console.log(parsedBody)
        })

	output:
	Server starting..
	<Buffer 75 73 65 72 6e 61 6d 65 3d 73 68 75 62 68 61 6d 2b 6a 61 64 61 76 26 67 65 6e 64 65 72 	3d 6d 61 6c 65>
	username=shubham+jadav&gender=male
	/ GET

5.6 Parsing Request
	:  URLSearchParams  : finale body how to show : encoding data and decoding


	code : 
  	req.on("end",()=>{
            const parsedBody = Buffer.concat(body).toString();
            
            console.log(parsedBody)
        
            // URLSearchParams : parsing request code decoding to encoding
            const params = new URLSearchParams(parsedBody);
            const bodyObject = {};
            for (const [key, val] of params.entries()){
                bodyObject[key] = val;
            }
            console.log(bodyObject);
        })

	replace  code : one line
  	req.on("end",()=>{
            const parsedBody = Buffer.concat(body).toString();
            
            console.log(parsedBody)
        
            // URLSearchParams : parsing request code decoding to encoding
            const params = new URLSearchParams(parsedBody);

            // const bodyObject = {};
            // for (const [key, val] of params.entries()){
            //     bodyObject[key] = val;
            // }

            // code replce upper data
            const bodyObject = Object.fromEntries(params);
            console.log(bodyObject);
        })


	output : 
	<Buffer 75 73 65 72 6e 61 6d 65 3d 73 68 75 62 68 61 6d 2b 6a 61 64 61 76 26 67 65 6e 64 65 72 		3d 6d 61 6c 65>
	username=shubham+jadav&gender=male
	{ username: 'shubham jadav', gender: 'male' }
	/ GET
	Server starting..
	/favicon.ico GET
	Server starting..


final code data:

	// client and server mate  http moduule

const http = require('http');
const fs = require('fs');

// server created
const server = http.createServer((req, res) => {
    // console.log(req);
    console.log(req.url, req.method)
    console.log("Server starting..")
    // process.exit();

    // defferent Url show data
    if (req.url === '/') {
        res.setHeader('Contetnt-Type', 'text/html');

         res.write(`
            <html>
            <head>
                <title>Shubham Jadav</title>
            </head>
            <body>
                <h1>Enter Your Details</h1>

                <form action="/submit-details" method="POST">
                    <input type="text" name="username" placeholder="Enter your Name" required><br><br>

                    <label for="male">Male</label>
                    <input type="radio" id="male" name="gender" value="male"><br>

                    <label for="female">Female</label>
                    <input type="radio" id="female" name="gender" value="female"><br><br>

                    <input type="submit" value="Submit">
                </form>
            </body>
            </html>
        `);
        return res.end()
    }
    // redirecting route wrong
    else if (req.url.toLowerCase() === "/submit-details" && req.method == "POST"){

        // created buffer data store
        const body = [];
        // chunk created single chunk use

        req.on('data',(chunk)=>{
            console.log(chunk);
            body.push(chunk);
        });

        // buffer to end data that will show
        req.on("end",()=>{
            const parsedBody = Buffer.concat(body).toString();
            
            console.log(parsedBody)
        
            // URLSearchParams : parsing request code decoding to encoding
            const params = new URLSearchParams(parsedBody);
            // const bodyObject = {};
            // for (const [key, val] of params.entries()){
            //     bodyObject[key] = val;
            // }

            // code replce upper data
            const bodyObject = Object.fromEntries(params);
            console.log(bodyObject);
            fs.writeFileSync('user.txt',JSON.stringify(bodyObject));
        })

        
        res.statusCode = 302;
        res.setHeader('Location','/');
        return res.end();
    }

    res.setHeader('Contetnt-Type', 'text/html');
    res.write('<html>');
    res.write('<hrad><title>shubham jadav</title></head>');
    res.write('<body><h1>Hello shubham jadav here for node js</h1></body>')
    res.write('</html>');
    res.end()

});

const PORT = 3000;

// server respose
server.listen(PORT, () => {
    console.log(`server runing on address http://localhost:${PORT}`)
});



5.7 Using Modules
	user.js: 

	const userrequestHandler = (req, res) => {

	module.exports = userrequestHandler;

	app.js code : 
	const http = require('http');
	const requestHandler = require('./user');

	const server = http.createServer(requestHandler)

	const PORT = 3000;

	// server respose
	server.listen(PORT, () => {
    	console.log(`server runing on address http://localhost:${PORT}`)
	});

Parctise Set
create a calculator
	1. create a new node.js project named "calculator".
	2. On the home page (route "/"). show a welcome message and a link to the calculator page.
	3. on the "/calculator" page, display a forn with two input fields and a "sum button.
	3. when the user click the "sum" button, they should be taken to the "calculare-result" page., whice show the sum of the two number.
	- make sure the request goes to the server.
	- create a separate module for the addition funtion.
	- create another module to handle incoming requests.
	- on the "/claculate-result" page, parse the user input, use the addition mdule to calculate the sum , and display the result on new html page. 



